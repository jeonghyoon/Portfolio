---
title: 'Firebase Messaging ì´ìš©í•´ì„œ React Native í‘¸ì‹œ ì•Œë¦¼ì„ 3ë²ˆ ì´ìƒ ì„¤ì • í›„ ëŠë‚€ ê²ƒë“¤ (ì„¤ì • ê°€ì´ë“œ, í…ŒìŠ¤íŠ¸ ë°©ë²•)'
description: 'ìƒˆë¡œìš´ íšŒì‚¬ë¥¼ ì´ì§í•˜ë©° ì—¬ëŸ¬ê°œì˜ í”„ë¡œì íŠ¸ë¥¼ í•˜ë‹¤ë³´ë‹ˆ ì´ firebase messaging ì´ˆê¸° ì„¤ì •ë§Œ 3~4ë²ˆì€ í•œ ê²ƒ ê°™ì•„ìš”.'
date: '2025-09-08'
tags: ['react native', 'FCM', 'Firebase', 'Firebase Cloud Messaging', 'PushNotification', 'android', 'iOS', 'í‘¸ì‹œì•Œë¦¼']
category: 'React Native'
thumbnail: /posts/rn-firebase-messaging.png
---

ìƒˆë¡œìš´ íšŒì‚¬ë¥¼ ì´ì§í•˜ë©° ì—¬ëŸ¬ê°œì˜ í”„ë¡œì íŠ¸ë¥¼ í•˜ë‹¤ë³´ë‹ˆ ì´ firebase messaging ì´ˆê¸° ì„¤ì •ë§Œ 3~4ë²ˆì€ í•œ ê²ƒ ê°™ì•„ìš”.

ì´ë ‡ê²Œ ë§ì´ ì„¤ì • í•˜ë‹¤ë³´ë‹ˆ ëŠë‚€ê±´ ìƒê°ë³´ë‹¤ ì •ë§ ì–´ë µì§€ ì•Šë‹¤ì…ë‹ˆë‹¤.! ì¤‘ê°„ì¤‘ê°„ ë°œìƒí•˜ëŠ” ë²„ê·¸ë“¤ë„ ì‘ì„±í•´ ë‘ì—ˆìœ¼ë‹ˆ ë¬¸ì œê°€ ìƒê¸°ë©´ ê¼­ í™•ì¸í•´ì£¼ì„¸ìš©

react-nativeì— ì´ Firebase Cloud Messaging ì„œë¹„ìŠ¤ë¥¼ ì¶”ê°€í•˜ë ¤ê³  í•˜ë©´ ìµœëŒ€í•œ ì´ ê¸€ í•˜ë‚˜ë§Œ ë³´ë©´ êµ¬í˜„í•  ìˆ˜ ìˆê²Œ ì •ë¦¬í•´ ë†“ìœ¼ë ¤ê³  í•©ë‹ˆë‹¹

ê·¸ëŸ¼ ë°”ë¡œ ì‹œì‘!

## firebase console, ios developer ì„¤ì •

ë¨¼ì € [firebase console](https://console.firebase.google.com/)ì— ì ‘ì†í•´ì„œ ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ë¯¸ ë§Œë“¤ì–´ì ¸ ìˆëŠ” ê²½ìš° ì´ ë¶€ë¶„ì€ íŒ¨ìŠ¤!

ì´ê±´ react-nativeë¥¼ ë– ë‚˜ì„œ firebase messagingì„ ì‚¬ìš©í•˜ë ¤ë©´ í•„ìˆ˜ì ì¸ ì„¤ì •ì…ë‹ˆë‹¤.

### í”„ë¡œì íŠ¸ ìƒì„±

íŒŒì´ì–´ë² ì´ìŠ¤ ì½˜ì†”ì— ë“¤ì–´ê°€ë©´ ì²˜ìŒ ë³´ì´ëŠ” í™”ë©´ì´ì—ìš”.

![](https://velog.velcdn.com/images/bbahna/post/8a5dd01b-d723-4bf1-b196-d80b46bdb00f/image.png)

![](https://velog.velcdn.com/images/bbahna/post/807ef7ab-893d-4d41-9016-e81103ba4d31/image.png)

í”„ë¡œì íŠ¸ ì´ë¦„ì„ ì…ë ¥í•´ ì¤ë‹ˆë‹¤.

![](https://velog.velcdn.com/images/bbahna/post/c73bf5f2-ac91-4056-a3bb-592964142dfa/image.png)

ì• ë„ë¦¬í‹±ìŠ¤(ë¡œê·¸ ì´ë²¤íŠ¸ ì¶”ì  ì„œë¹„ìŠ¤)ì€ ê°œì¸ì˜ ì„ íƒì´ë‹ˆ í•´ë„ ë˜ê³  ì•ˆí•´ë„ ìƒê´€ ì—†ì–´ìš”.

![](https://velog.velcdn.com/images/bbahna/post/024f1ab4-8582-4e39-9d0a-4698d08ed14b/image.png)

ë§ˆì§€ë§‰ìœ¼ë¡œ í”„ë¡œì íŠ¸ ë§Œë“¤ê¸° í´ë¦­

![](https://velog.velcdn.com/images/bbahna/post/70c39c18-1be7-47fd-a41a-7704510e31ff/image.png)

![](https://velog.velcdn.com/images/bbahna/post/6b87b40a-3a52-415e-8638-e2ffd4dc7520/image.png)

í”„ë¡œì íŠ¸ ë§Œë“œëŠ”ë° ì•½ê°„ ê¸°ë‹¤ë ¤ì£¼ë©´, ë‚´ê°€ ë§Œë“  í”„ë¡œì íŠ¸ ì´ë¦„ëŒ€ë¡œ ìƒì„±ì´ ë©ë‹ˆë‹¤.

![](https://velog.velcdn.com/images/bbahna/post/df61213b-6e7f-4648-8f31-59e59a5c32bd/image.png)

![](https://velog.velcdn.com/images/bbahna/post/68600e65-27a5-40f3-b291-a1bf11ffd118/image.png)

ë§Œë“¤ì–´ì§„ í”„ë¡œì íŠ¸ë¥¼ í´ë¦­í•´ì„œ ë“¤ì–´ê°€ë©´ ì´ë ‡ê²Œ ëŒ€ì‹œë³´ë“œê°€ ë‚˜ì˜µë‹ˆë‹¤.

### ios ì„¤ì •

ìœ„ ëŒ€ì‹œë³´ë“œì—ì„œ ios ì•±ì„ ì¶”ê°€í•˜ì—¬ ì‹œì‘í•˜ê¸° ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.

![](https://velog.velcdn.com/images/bbahna/post/ddd8c109-d302-458b-a7fe-bc2fef2bbddc/image.png)

ë‹¤ìŒ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë‚˜ì˜ apple ë²ˆë“¤ idë¥¼ ì…ë ¥í•˜ëŠ” ë¶€ë¶„ì´ ë‚˜ì˜µë‹ˆë‹¤.

ë²ˆë“¤ idëŠ” apple storeì— ë“¤ì–´ê°€ì…”ì„œ, ë‚´ê°€ ë§Œë“  ë‚˜ì˜ ì•±ì˜ ë²ˆë“¤ IDë¥¼ ì…ë ¥í•´ ì¤ë‹ˆë‹¤.

![](https://velog.velcdn.com/images/bbahna/post/d4fe9ba4-c4fc-48c5-8ccc-777236da4624/image.png)

ë³´í†µ com.myproject.app ì´ëŸ° í˜•ì‹ì´ê² ì£ ?

![](https://velog.velcdn.com/images/bbahna/post/2fd68e83-5a90-4fce-94f4-c2c526507cce/image.png)
ìœ„ `GoogleService-Info.plist` íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ í•´ì¤ë‹ˆë‹¤.

ê·¸ë¦¬ê³  ìœ„ ì„¤ëª…ì²˜ëŸ¼ ê¼­ Xcodeë¥¼ í†µí•´ êµ¬ì„± íŒŒì¼ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”. í”„ë¡œì íŠ¸ í´ë”ì— ê·¸ëƒ¥ íŒŒì¼ì„ ì¶”ê°€í•  ê²½ìš°, Xcodeì—ì„œ ì¸ì‹ì´ ì•ˆ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![](https://velog.velcdn.com/images/bbahna/post/ce848e11-8019-4a84-bb4a-0f0a7e62b184/image.png)

![](https://velog.velcdn.com/images/bbahna/post/62acf89a-48bd-484f-bfd8-f0be9c0a2a09/image.png)

firebase messagingì„ ì‚¬ìš©í•˜ë ¤ë©´ sdk ì„¤ì •ê³¼ ì´ˆê¸°í™” ì½”ë“œ ì¶”ê°€ í•„ìš”í•œë° ì´ ë¶€ë¶„ì€ ì•„ë˜ì— ì ì–´ë‘ì—ˆìŠµë‹ˆë‹¤.

![](https://velog.velcdn.com/images/bbahna/post/57e95a47-45ba-468e-8af3-d471e8e8ba3d/image.png)

ê·¸ë ‡ê²Œ ios ì•± ì¶”ê°€ë¥¼ ì™„ë£Œí•´ì¤ë‹ˆë‹¤.

- **í”„ë¡œì íŠ¸ ì„¤ì • > ì¼ë°˜**

![](https://velog.velcdn.com/images/bbahna/post/a750ba55-9f2a-4fef-9e41-2fcb0ccb2e03/image.png)

ê·¸ë ‡ê²Œ í”„ë¡œì íŠ¸ ì„¤ì • > ì¼ë°˜ì— ë“¤ì–´ê°€ë³´ë©´ ìƒì„±ì´ ëœ Appple ì•±ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- **APNs ì„¤ì •, key ë‹¤ìš´ë¡œë“œ**

ë‹¤ìŒìœ¼ë¡œ ì¤‘ìš”í•œ apple APNs ì„¤ì •ê³¼ key ì„¤ì •í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

ì´ ê³¼ì •ì€ firebaseì— apple ì•±ì„ ë§¤ì¹­ì‹œì¼œì£¼ëŠ” ì¼ì¢…ì˜ ê²€ì¦ ê³¼ì •ì´ì—ìš”.

apple developer ë‚´ keysì— ì ‘ì†í•´ ì¤ë‹ˆë‹¤.

[https://developer.apple.com/account/resources/authkeys/list](https://developer.apple.com/account/resources/authkeys/list)

![](https://velog.velcdn.com/images/bbahna/post/ef993ff6-e10b-4e84-97ec-0e0acab259f5/image.png)

ì´ë¯¸ ì„¤ì •ëœ ê²ƒë“¤ì´ ë³´ì´ì£ ?

ì™„ë£Œëœ ì˜ˆì‹œì…ë‹ˆë‹¤.

![](https://velog.velcdn.com/images/bbahna/post/33b933c8-99f4-46b8-a8b6-d29c533cbd07/image.png)

ì´ë¯¸ ì„¤ì •í•œ ëª¨ìŠµì¸ë°ìš”. apple ë¡œê·¸ì¸ì€ í•„ìˆ˜ê°€ ì•„ë‹ˆë‹ˆ ì‹ ê²½ ì•ˆì“°ì…”ë„ ë©ë‹ˆë‹¤.

![](https://velog.velcdn.com/images/bbahna/post/6ce15d7f-c904-41a2-99dc-ca4630bf3a5f/image.png)

ìœ„ APNs ì„¤ì •ì€ ìœ„ì™€ ê°™ì´ í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.

ê°œë°œê³„, ìš´ì˜ê³„ê°€ ìˆì–´ë„ APNS ENVIRONMENTëŠ” Sandbox & Productionìœ¼ë¡œ ì„ íƒí•´ ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ê°œë°œê³„/ìš´ì˜ê³„ ê°ê° keysë¥¼ ë§Œë“¤ë©´ ë¼ìš”.

![](https://velog.velcdn.com/images/bbahna/post/36bdfe86-f803-440b-82ea-64baa921d307/image.png)

ìµœì¢… í™”ë©´ì¸ë° keyëŠ” í•œë²ˆë°–ì— ë‹¤ìš´ì´ ë˜ì§€ ì•Šìœ¼ë‹ˆ ê¼­ ì£¼ì˜í•´ì£¼ì„¸ìš”!

í‚¤ íŒŒì¼ ì˜ˆì‹œ: AuthKey_1Q1W2E3R4.p8

- **í”„ë¡œì íŠ¸ ì„¤ì • > í´ë¼ìš°ë“œ ë©”ì‹œì§•**

![](https://velog.velcdn.com/images/bbahna/post/1263b6c0-9bf9-426b-9ce3-16cf3052ed94/image.png)

ê·¸ë ‡ê²Œ apple developerì—ì„œ ë‹¤ìš´ë°›ì€ keyë¥¼ firebaseì— ì¶”ê°€í•´ì¤ë‹ˆë‹¤.

### android ì„¤ì •

ë‹¤ìŒìœ¼ë¡œ android ì„¤ì •ì„ í•´ë³¼ê²Œìš”.

![](https://velog.velcdn.com/images/bbahna/post/7daa44bc-282c-4245-a9dd-81034c2d265d/image.png)

iosì™€ ë™ì¼í•˜ê²Œ android ì•±ì„ ì¶”ê°€í•˜ì—¬ ì‹œì‘í•˜ê¸° ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ìƒì„±í•´ì¤ë‹ˆë‹¤.

![](https://velog.velcdn.com/images/bbahna/post/995568c5-43fe-4f14-8325-9cd6c35519e4/image.png)

ì—¬ê¸°ì„  `google-services.json` íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ í•´ì¤ë‹ˆë‹¤.

ì´ ë˜í•œ ì„¤ëª…ëŒ€ë¡œ íŒŒì¼ì„ í”„ë¡œì íŠ¸ì— ì¶”ê°€í•´ ì¤ë‹ˆë‹¤. (ì•„ë˜ì— ì„¤ëª…ë„ ì ì–´ë‘ì—ˆì–´ìš”.)

![](https://velog.velcdn.com/images/bbahna/post/66134dab-6ab6-42b1-86fe-c5a1f67df96f/image.png)

androidë„ iosì™€ ë™ì¼í•˜ê²Œ adk ì„¤ì •ì„ í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

ìœ„ ì„¤ëª…ëŒ€ë¡œ ë”°ë¼í•˜ì…”ë„ ë˜ê³ , ì•„ë˜ ì œ ì½”ë“œëŒ€ë¡œ í•´ë³´ì…”ë„ ë©ë‹ˆë‹¤.

![](https://velog.velcdn.com/images/bbahna/post/1e6f6906-bc40-4c9d-b597-a488cef46a6b/image.png)

ë‚´ìš© í™•ì¸ í›„ android ì•± ì¶”ê°€ë¥¼ ì™„ë£Œí•´ì¤ë‹ˆë‹¤.

## APP ì„¤ì •

firebase ì„¤ì •ì„ ì™„ë£Œí–ˆìœ¼ë©´, ì´ì œ ë‚˜ì˜ appì— ìœ„ ì„¤ì • íŒŒì¼ë“¤ì„ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.

### ios ì„¤ì •

1. **Xcode > GoogleService-Info.plist íŒŒì¼ ì¶”ê°€**

![](https://velog.velcdn.com/images/bbahna/post/26f6af39-cfde-4463-8ac9-5f80928d7c28/image.png)

`{myProject}/ios/{myProject}` í´ë” ìœ„ì¹˜ ë‚´ì— firebaseì—ì„œ ë‹¤ìš´ ë°›ì€ GoogleService-Info.plist íŒŒì¼ì„ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.

ì‚¬ì§„ì²˜ëŸ¼ Xcodeì—ì„œ íŒŒì¼ ì¶”ê°€ë¥¼ í•´ì•¼ ì¸ì‹ì„ í•©ë‹ˆë‹¤. í´ë¦­í•˜ë©´ ìœ„ì™€ ê°™ì´ ë³´ì…ë‹ˆë‹¤.

2. **Xcode > Background Modes, Push Notifications ì¶”ê°€**

![](https://velog.velcdn.com/images/bbahna/post/7df71ddf-f283-4270-8ee3-70a48124b5b9/image.png)

ìœ„ ì‚¬ì§„ì²˜ëŸ¼ Xcodeì—ì„œ Background Modes, Push Notifications ê¸°ëŠ¥ ì¶”ê°€ê°€ í•„ìš”í•©ë‹ˆë‹¤.

3. **`ios/{project}/AppDelegate.mm` ë˜ëŠ” `AppDelegate.swift`ì— firebase ì´ˆê¸° ì„¤ì • ì½”ë“œ ì¶”ê°€**

   objective-cì¼ ê²½ìš° ì•„ë˜ì²˜ëŸ¼ ì‘ì„±í•´ì£¼ê³ ,

   ```objectivec
   // ios/{project}/AppDelegate.mm

   #import <Firebase.h> // ì¶”ê°€

   @implementation AppDelegate

   - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
   {
     self.moduleName = @"rn_app";
     self.initialProps = @{};

     if ([FIRApp defaultApp] == nil) { // ì¶”ê°€
       [FIRApp configure]; // ì¶”ê°€
     } // ì¶”ê°€

     return [super application:application didFinishLaunchingWithOptions:launchOptions];
     [RNSplashScreen show];
     return YES;
   }
   ```

   swiftì¼ ê²½ìš° ì•„ë˜ì²˜ëŸ¼ ì„¤ì •í•´ ì¤ë‹ˆë‹¤.

   ```swift
   // ios/{project}/AppDelegate.swift

   import Firebase // ì¶”ê°€

   @main
   class AppDelegate: UIResponder, UIApplicationDelegate {
     var window: UIWindow?

     var reactNativeDelegate: ReactNativeDelegate?
     var reactNativeFactory: RCTReactNativeFactory?

     func application(
       _ application: UIApplication,
       didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]? = nil
     ) -> Bool {
       let delegate = ReactNativeDelegate()
       let factory = RCTReactNativeFactory(delegate: delegate)
       delegate.dependencyProvider = RCTAppDependencyProvider()

       reactNativeDelegate = delegate
       reactNativeFactory = factory

       // Configure Firebase
       if FirebaseApp.app() == nil { // ì¶”ê°€
         FirebaseApp.configure() // ì¶”ê°€
       } // ì¶”ê°€
   ```

4. **ë§Œì•½ pod install ì—ëŸ¬ ë°œìƒ ì‹œ, ios/Podfileì— ì•„ë˜ ì½”ë“œë¥¼ ì‘ì„±í•´ ì¤ë‹ˆë‹¤.**

   ```objectivec
   if linkage != nil
     Pod::UI.puts "Configuring Pod with #{linkage}ally linked Frameworks".green
     use_frameworks! :linkage => linkage.to_sym
   else // ì¶”ê°€
     use_frameworks! :linkage => :static // ì¶”ê°€
     $RNFirebaseAsStaticFramework = true // ì¶”ê°€
   end

   target 'rn_app' do
     config = use_native_modules!

     use_react_native!(
       :path => config[:reactNativePath],
       # An absolute path to your application root.
       :app_path => "#{Pod::Config.instance.installation_root}/.."
     )

     pod 'Firebase/Core' // í•„ìˆ˜ ì•„ë‹Œë“¯
     pod 'Firebase/Messaging' // í•„ìˆ˜ ì•„ë‹Œë“¯
   ```

### ì—ëŸ¬ ë°œê²¬ ê¸°ë¡

1. `npm i @react-native-firebase/app @react-native-firebase/messaging` ì„¤ì¹˜ í›„ `pod install` ì—ëŸ¬

   â†’ `The Swift pod FirebaseCoreInternal depends upon GoogleUtilities, which does not define modules.`

   ìœ„ì™€ ê°™ì€ ì—ëŸ¬ ë°œìƒ ì‹œ, Podfileì— ì•„ë˜ ì½”ë“œë¥¼ ì¶”ê°€í•´ ì¤ë‹ˆë‹¤.

   ```swift
   // ios/Podfile

   if linkage != nil
     Pod::UI.puts "Configuring Pod with #{linkage}ally linked Frameworks".green
     use_frameworks! :linkage => linkage.to_sym
   else // ì¶”ê°€
     use_frameworks! :linkage => :static // ì¶”ê°€
     $RNFirebaseAsStaticFramework = true // ì¶”ê°€
   end
   ```

2. build ì‹œ ì—ëŸ¬ `[runtime not ready]: Error: No Firebase App '[DEFAULT]' has been created - call firebase.initializeApp()`

   ìœ„ì™€ ê°™ì€ ì—ëŸ¬ ë°œìƒ ì‹œ, `ios/{project}/AppDelegate.mm` íŒŒì¼ì— firebase config ì„¤ì •ì„ ì¶”ê°€í•´ ì¤ë‹ˆë‹¤.

   ```objective-c
   #import <Firebase.h> // ì¶”ê°€

   @implementation AppDelegate

   - (BOOL)application:(UIApplication _)application didFinishLaunchingWithOptions:(NSDictionary _)launchOptions
    {
     self.moduleName = @"rn_app";
     self.initialProps = @{};

     if ([FIRApp defaultApp] == nil) { // ì¶”ê°€
     [FIRApp configure]; // ì¶”ê°€
     } // ì¶”ê°€

     return [super application:application didFinishLaunchingWithOptions:launchOptions];
     [RNSplashScreen show];
     return YES;
    }
   ```

### android ì„¤ì •

1. **android/app/google-services.json íŒŒì¼ ì¶”ê°€**

![](https://velog.velcdn.com/images/bbahna/post/6d967ad1-4c7b-4a29-a723-a6af0fc4f285/image.png)

í”„ë¡œì íŠ¸ëª…/android/app í´ë” ìœ„ì¹˜ ë‚´ì— firebaseì—ì„œ ë‹¤ìš´ ë°›ì€ google-services.json íŒŒì¼ì„ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.

2. **android/build.gradle**

   ```java
   dependencies {
   		classpath("com.android.tools.build:gradle")
   		classpath("com.facebook.react:react-native-gradle-plugin")
   		classpath("org.jetbrains.kotlin:kotlin-gradle-plugin")
   		classpath("com.google.gms:google-services:4.4.2") // ì¶”ê°€
   }
   ```

   firebase android sdkë¥¼ android/build.gradle ë‚´ì— ìœ„ì™€ ê°™ì´ ì¶”ê°€í•´ ì¤ë‹ˆë‹¤.

3. **android/app/build.gradle**

   ```java
   // apply plugin í•˜ë‹¨
   apply plugin: "com.google.gms.google-services" // ì¶”ê°€
   ```

   ë™ì¼í•˜ê²Œ android/app/build.gradle ë‚´ì— ìœ„ì™€ ê°™ì´ firebase android sdkë¥¼ ì¶”ê°€í•´ ì¤ë‹ˆë‹¤.

- **ì—ëŸ¬ ë°œê²¬ ê¸°ë¡**

1. ìœ„ build.gradle ì¶”ê°€ í›„ sync ì‹œ, `CMake Error at /android/app/build/generated/autolinking/src/main/jni/Android-autolinking.cmake:10 (add_subdirectory)`

   â†’ `npx react-native codegen` ì‹¤í–‰ í›„, android/gradle.properties > `newArchEnabled` ê°’ falseë¡œ ë³€ê²½

   ```java
   // android/gradle.properties

   newArchEnabled=true // ë³€ê²½ í›„
   newArchEnabled=false // ë³€ê²½ ì „
   ```

### react native ì„¤ì •

ì•„ë˜ì™€ ê°™ì´ í‘¸ì‹œ í† í° ê°€ì ¸ì˜¤ê¸°, ì•Œë¦¼ ê¶Œí•œ ìš”ì²­, ì•Œë¦¼ ìˆ˜ì‹  ì„¤ì •ì„ ë°›ê¸° ìœ„í•œ react native ì½”ë“œë¥¼ ì‘ì„±í•´ ì¤ë‹ˆë‹¤.

```jsx
/* firebaseMessaging.ts */
import { getApp } from '@react-native-firebase/app';
import {
	AuthorizationStatus,
	getMessaging,
	getToken,
	onMessage,
	requestPermission,
	setBackgroundMessageHandler,
} from '@react-native-firebase/messaging';

import Notification from '@/components/Notification';

const messaging = getMessaging(getApp());

// FCM í† í° ê°€ì ¸ì˜¤ê¸°
export const getFCMToken = async () => {
	try {
		const token = await getToken(messaging);
		console.log('FCM Token:', token);
		return token;
	} catch (error) {
		console.error('FCM Token ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:', error);
	}
};

// ì•Œë¦¼ ê¶Œí•œ ìš”ì²­
export const requestUserPermission = async () => {
	const authStatus = await requestPermission(messaging);
	const enabled = AuthorizationStatus.AUTHORIZED || authStatus === AuthorizationStatus.PROVISIONAL;

	if (enabled) {
		console.log('í‘¸ì‹œ ì•Œë¦¼ ê¶Œí•œ ìŠ¹ì¸ë¨');
	}
};

// Background & Quit ìƒíƒœ ì•Œë¦¼ ìˆ˜ì‹ 
setBackgroundMessageHandler(messaging, async (remoteMessage) => {
	console.log('ğŸ’Œ Message handled in the background!', remoteMessage);
});

// foreground ìƒíƒœ ì•Œë¦¼ ìˆ˜ì‹ 
onMessage(messaging, async (remoteMessage) => {
	console.log('ğŸ’Œ messaging ~ remoteMessage:', remoteMessage);

	if (remoteMessage)
		Notification.notification(remoteMessage.notification?.title, {
			onPress: () => {
				// if (remoteMessage.data) Linking.openURL(remoteMessage.data);
			},
		});
});
```

```jsx
/* initApplication.ts */

import { getFCMToken, requestUserPermission } from '@/service/firebaseMessaging';

export const initApplication = async () => {
	await requestUserPermission();
	await getFCMToken();
};
```

```jsx
/* App.js */
export default function App() {
	useEffect(() => {
		initApplication();
	}, []);

	return (
		<SafeAreaProvider>
			<Notification />
			<AppContainer />
		</SafeAreaProvider>
	);
}
```

- **notifee ì¶”ê°€ (ì„ íƒ)**

â†’ notifeeëŠ” androidì—ì„œ ì•Œë¦¼ì„ ì»¤ìŠ¤í…€ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. (iosëŠ” ì§€ì›ë˜ì§€ ì•ŠìŒ)

ì•Œë¦¼ ë‚´ ì‚¬ì§„ì´ë‚˜ ì•Œë¦¼ ëª¨ì–‘ ë“± ë””ìì¸ì„ ë³€ê²½í•˜ëŠ” ê¸°ëŠ¥ì„ ì§€ì›í•©ë‹ˆë‹¤. (ì°¸ê³  : [https://notifee.app/](https://notifee.app/))

ì•„ë˜ëŠ” ìœ„ì™€ ê°™ì€ ì½”ë“œì— notifee ì„¤ì •ì„ ì¶”ê°€í•œ ì½”ë“œì…ë‹ˆë‹¤. ì°¸ê³ í•´ì£¼ì„¸ìš”.

```tsx
/* firebaseMessaging.ts */
import notifee, { AndroidImportance, AndroidVisibility, AuthorizationStatus, EventType } from '@notifee/react-native';
import { getApp } from '@react-native-firebase/app';
import { FirebaseMessagingTypes, getMessaging, getToken } from '@react-native-firebase/messaging';
import { Platform } from 'react-native';

const messaging = getMessaging(getApp());

// ì•Œë¦¼ ê¶Œí•œ ìš”ì²­
export const requestUserPermission = async () => {
	const settings = await notifee.requestPermission();

	if (settings.authorizationStatus === AuthorizationStatus.DENIED) {
		console.log('ğŸš« User denied permissions request ~ DENIED');
	} else if (settings.authorizationStatus === AuthorizationStatus.AUTHORIZED) {
		console.log('âœ… User granted permissions request ~ AUTHORIZED');
	} else if (settings.authorizationStatus === AuthorizationStatus.PROVISIONAL) {
		console.log('ğŸŸ¡ User provisionally granted permissions request ~ PROVISIONAL');
	}
};

// FCM í† í° ê°€ì ¸ì˜¤ê¸°
export const getFCMToken = async () => {
	try {
		const token = await getToken(messaging);
		console.log('ğŸ”‘ FCM Token succeed:', token);
		return token;
	} catch (error) {
		console.error('âŒ FCM Token failed:', error);
	}
};

// Background & Quit ìƒíƒœ ì•Œë¦¼ ìˆ˜ì‹  - ios
notifee.onBackgroundEvent(async ({ type, detail }) => {
	if (type === EventType.PRESS) {
		console.log('ğŸ’Œ Background notification pressed:', Platform.OS, detail.notification);
	}
});

// Foreground ìƒíƒœ ì•Œë¦¼ ìˆ˜ì‹ 
notifee.onForegroundEvent(({ type, detail }) => {
	if (type === EventType.PRESS) {
		console.log('ğŸ’Œ Foreground notification pressed:', detail.notification);
	} else if (type === EventType.DELIVERED) {
		console.log('ğŸ’Œ Notification delivered in foreground:', detail.notification);
	}
});

// Foreground ë©”ì‹œì§€ ìˆ˜ì‹  í•¸ë“¤ëŸ¬ ë“±ë¡
export const registerForegroundMessageHandler = () => {
	return messaging.onMessage(async (remoteMessage) => {
		console.log('ğŸ’Œ Foreground message received:', remoteMessage);
		await onDisplayNotification(remoteMessage);
	});
};

export const onDisplayNotification = async (remoteMessage: FirebaseMessagingTypes.RemoteMessage) => {
	try {
		const { data } = remoteMessage;
		const channelId = await notifee.createChannel({
			id: 'default',
			name: 'ê¸°ë³¸ ì•Œë¦¼',
			importance: AndroidImportance.HIGH,
			visibility: AndroidVisibility.PUBLIC,
		});

		await notifee.displayNotification({
			title: remoteMessage.notification?.title,
			body: remoteMessage.notification?.body,
			data,
			android: {
				channelId,
				importance: AndroidImportance.HIGH,
				visibility: AndroidVisibility.PUBLIC,
			},
		});
	} catch (err) {
		console.error('âŒ catch error: ', err);
	}
};
```

```jsx
/* index.js */
import { AppRegistry, Platform } from 'react-native';

import App from './App';
import { name as appName } from './app.json';
import { getMessaging } from '@react-native-firebase/messaging';
import { onDisplayNotification } from './app/service/firebaseMessaging';
import { getApps } from '@react-native-firebase/app';

// Background & Quit ìƒíƒœ ì•Œë¦¼ ìˆ˜ì‹  - android
const messaging = getMessaging(getApps());
messaging.setBackgroundMessageHandler(async (remoteMessage) => {
	console.log('ğŸ’Œ Background notification pressed:', Platform.OS, remoteMessage);
	return await onDisplayNotification(remoteMessage);
});

AppRegistry.registerComponent(appName, () => App);
```

```tsx
/* App.tsx */
function App(): React.JSX.Element {

  useEffect(() => {
    const setupFirebase = async () => {
      try {
        await requestUserPermission();
        await getFCMToken();
        return registerForegroundMessageHandler();
      } catch (error) {
        console.error('Firebase initialization error:', error);
        return undefined;
      }
    };
    const unsubscribePromise = setupFirebase();
    return () => {
      unsubscribePromise.then(unsubscribe => unsubscribe?.());
    };
  }, []);

  return (
	  // ìƒëµ
  );
}

export default App;
```

### FCM Token Push test

ìœ„ì™€ ê°™ì´ ì„¤ì • í›„ getFCMToken í•´ë‹¹ í•¨ìˆ˜ë¡œ ë°›ì€ í† í°ì„ ê°€ì§€ê³  ìˆë‹¤ê°€, firebase > Messagingì—ì„œ í…ŒìŠ¤íŠ¸ í•´ë³¼ ìˆ˜ ìˆëŠ”ë°ìš”.

![](https://velog.velcdn.com/images/bbahna/post/5f627ebe-16d2-411e-a464-11a8f59f3367/image.png)![](https://velog.velcdn.com/images/bbahna/post/e0b8199f-52f9-43b7-8124-0eff90c4888f/image.png)

ìƒˆ ìº í˜ì¸ ë²„íŠ¼ > ì•Œë¦¼ì„ í´ë¦­í•´ì£¼ë©´ ì•„ë˜ì™€ ê°™ì€ í™”ë©´ì´ ë‚˜ì˜µë‹ˆë‹¤.

![](https://velog.velcdn.com/images/bbahna/post/9f5f0773-2862-4191-8798-c9ddc905ac79/image.png)![](https://velog.velcdn.com/images/bbahna/post/bb37b5d5-ceca-41fe-9dbc-ba101cfa24f8/image.png)

í•„ìˆ˜ê°’ì¸ ì•Œë¦¼ í…ìŠ¤íŠ¸ë¥¼ ì‘ì„±í•´ì¤€ í›„, í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ ì „ì†¡ì„ í´ë¦­í•´ì£¼ë©´ ë‚˜ì˜ FCM í† í°ì„ ë„£ì–´ì„œ í…ŒìŠ¤íŠ¸ í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![](https://velog.velcdn.com/images/bbahna/post/c3868bd9-9229-436d-a324-b94c9c5d7943/image.png)

ë°œê¸‰ ë°›ì€ ë‚˜ì˜ FCM í† í°ì„ ì¶”ê°€í•´ì„œ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ì„ í´ë¦­í•´ì£¼ë©´, ë‚˜ì˜ ì•±ì—ì„œ ì‘ì„±í•œ ì•Œë¦¼ ë©”ì‹œì§€ë¡œ í‘¸ì‹œ ë©”ì‹œì§€ê°€ ì˜¤ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![](https://velog.velcdn.com/images/bbahna/post/3103b5c6-17fb-49a5-8113-a9f63545a6dd/image.png)

ì¶”ê°€ë¡œ ios, android íƒ€ì¼“ì„ ì •í•´ì„œ ì „ì²´ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

ì´ë ‡ê²Œ firebase messagingì„ ì„¤ì •í•˜ëŠ” ë°©ë²•ê³¼, í‘¸ì‹œ ì•Œë¦¼ì„ ë³´ë‚´ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œë„ ì•Œì•„ë³´ì•˜ëŠ”ë°ìš”.

í‘¸ì‹œ ì•Œë¦¼ ì²˜ìŒì—” ì˜ ëª¨ë¥´ë‹ˆ ê±±ì •ì´ ìˆì—ˆëŠ”ë°, firebaseë¡œ ì„¤ì • í•˜ê³ ë³´ë©´ ìƒê°ë³´ë‹¤ ê°„ë‹¨í•˜ê³  ì‰½ë”ë¼êµ¬ìš”.

![](https://velog.velcdn.com/images/bbahna/post/d745d768-db85-4c16-9535-7573401188dc/image.png)
